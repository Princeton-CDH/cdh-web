{% extends 'base.html' %}

{% block page-subtitle %}{{ title|default:'Upcoming' }} Events | {% endblock %}

{% block bodyattrs %}class="with-cards"{% endblock %}

{% block main %}

<section class="events">

<div class="archive-nav">
  <a class="toggle"><i class="fa fa-chevron-down" aria-hidden="true"></i></a>
  <ul class="submenu">
    {# include upcoming events page link #}
    {% url 'event:upcoming' as upcoming_url %}
    <li {% if request.path == upcoming_url %}class="current"{% endif %}><a href="{{ upcoming_url }}">Upcoming</a></li>
    {% for semester, year in date_list reversed %}
        {% url 'event:by-semester' semester=semester|slugify year=year as event_url %}
        <li {% if event_url == request.path  %}class="current"{% endif %}>
            <a href="{{ event_url }}">{{ semester }} {{ year }}</a></li>
    {% endfor %}
  </ul>
</div>

    <h1>{{ title|default:'Upcoming' }} Events</h1>
    {% for event in events %}
        {% include 'events/snippets/event_card.html' %}
    {% empty %}
        {# semester event archive will 404 for no events; upcoming does not #}
        <div>Next semester's events are being scheduled.
        {# link to most recent semester if we have past events #}
        {% if date_list %}
            Check back later or browse
            {% for semester, year in date_list reversed %}
                {% if forloop.first %}
                    {% url 'event:by-semester' semester=semester|slugify year=year as event_url %}
                    <a href="{{ event_url }}">{{ semester }} {{ year }}</a></li>
                {% endif %}
            {% endfor %} events.
        {% else %}
            Check back later.
        {% endif %}
        </div>
    {% endfor %}
</section>

{% endblock %}