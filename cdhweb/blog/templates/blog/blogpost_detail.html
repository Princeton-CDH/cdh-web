{% extends 'base.html' %}
{% load mezzanine_tags humanize %}

{% block page-subtitle %}{{ blogpost.title }} | Updates | {% endblock %}

{# preliminary blog post page; adapted from mezzanine blog post template #}

{% block main %}
<article typeof="schema:BlogPosting" class="blogpost">
    <header>
        <h1 property="schema:headline">{{ blogpost.title }}</h1>
        <meta property="schema:url" content="{{ blogpost.get_absolute_url }}"/>
        {# FIXME: do we need full url here? #}
        <meta property="schema:datePublished" content="{{ blogpost.publish_date|date:"c" }}"/>
        <meta property="schema:dateModified" content="{{ blogpost.updated|date:"c" }}"/>

        <div>
        By {% for author in blogpost.users.all %}
            <span property="schema:author" typeof="schema:Person">
                <a {% if author.profile %}property="schema:url" href="{{ author.profile.get_absolute_url }}"{% endif %}>
                <span property="schema:name">{{ author }}</span></a>{% if not forloop.last %}, {% endif %}
            </span>
        {% endfor %}
        | <span>{{ blogpost.publish_date|naturalday }}</span>
        {# NOTE: google structured data testing tool claims publisher & image are required #}
        </div>
    </header>

    <div class="content" property="schema:articleBody">
    {{ blogpost.content|richtext_filters|safe }}
    </div>

    {# basic (crude) tag display #}
    <div property="schema:keywords">{{ blogpost.tags.all|join:", "}}</div>

</article>
{% endblock %}
