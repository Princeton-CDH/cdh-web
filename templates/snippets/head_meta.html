{% load static cdh_tags %}
{# html metadata #}
{% autoescape on %}
{% if page.tags.exists %}<meta name="keywords" content="{{ page.tags.all|join:', ' }}"/>{% endif %}
{% if page.search_description %}<meta name="description" content="{{ page.search_description }}"/>{% endif %}
{# determine preview image: specified by page, cdh icon based on url, or default image #}
{% firstof preview_image page.get_url|url_to_icon_path default_preview_image as meta_preview_image %}
{# open graph metadata #}
<meta property="og:title" content="{% firstof page.seo_title page.title page_title %}" />
<meta property="og:type" content="{{ opengraph_type|default:'website' }}" />
<meta property="og:url" content="{{ request.build_absolute_uri }}" />
<meta property="og:image" content="{{ meta_preview_image }}" />
{% if page.search_description %}<meta property="og:description" content="{{ page.search_description }}"/>{% endif %}
<meta property="og:site_name" content="Center for Digital Humanities @ Princeton University"/>
{# twitter card #}
<meta name="twitter:card" content="{{ twitter_card_type|default:'summary' }}" />
<meta name="twitter:site" content="@PrincetonDH" />
<meta name="twitter:title" content="{% firstof page.seo_title page.title page_title %}"/>
{% if page.search_description %}<meta name="twitter:description" content="{{ page.search_description }}"/>{% endif %}
<meta name="twitter:image" content="{% firstof twitter_image meta_preview_image %}" />
{% endautoescape %}
